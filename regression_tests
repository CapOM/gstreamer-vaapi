The following tests should be converted to some gst-validate tests.

Note: the order of GstStructures in capsfilter does not matter since it will always re-order to match order specified by downstream, i.e. glimagesink.
Note: if expected fail is actually a success then it does not go to next step.


1-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw(meta:GstVideoGLTextureUploadMeta); video/x-raw, format=RGBx" ! glimagesink

-> skip meta | dmabuf map fail | meta

2-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw(meta:GstVideoGLTextureUploadMeta); video/x-raw, format=RGBx; video/x-raw(memory:DMABuf)" ! glimagesink

-> skip meta | dmabuf map fail | dmabuf feature

3-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw(memory:DMABuf)" ! glimagesink

-> dmabuf feature

4-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw, format=RGBx; video/x-raw(memory:DMABuf)" ! glimagesink

-> dmabuf map fail | dmabuf feature

5-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecode ! vaapipostproc ! capsfilter caps="video/x-raw, format=RGBx" ! glimagesink

-> dmabuf fail | raw upload

6-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw(meta:GstVideoGLTextureUploadMeta); video/x-raw(memory:DMABuf)" ! glimagesink

-> skip meta | dmabuf map fail | dmabuf feature

7-------------------

GST_GL_PLATFORM=egl GST_GL_WINDOW=x11 GST_GL_API=gles2 LIBVA_DRIVER_NAME=i965 gst-launch-1.0 filesrc location=/home/julien/Downloads/legend.mp4 ! qtdemux ! h264parse ! vaapidecodebin ! capsfilter caps="video/x-raw(meta:GstVideoGLTextureUploadMeta)" ! glimagesink

-> meta




